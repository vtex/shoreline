import { Section } from '@site/src/components/Section'
import { IntroSection } from '@site/src/components/IntroSection'

<IntroSection>

## What is this?

Page is a pattern that represents a complete screen of an admin application. You can use the following utility components to achieve consistency easily.

</IntroSection>

<Section>

## Composition

| Name             | Description                                                                      |
| ---------------- | -------------------------------------------------------------------------------- |
| Page             | Outlines the page area                                                           |
| PageHeader       | Users rely on the page header to navigate and orient themselves within the admin |
| PageHeaderTop    | This component is used to group elements to the top part of the PageHeader       |
| PageHeaderBottom | This component is used to group elements to the bottom part of the PageHeader    |
| PageContent      | Renders the content of the page                                                  |

</Section>

<Section hasExplanation>

## Variants

<Section hasExplanation>

### With title

This is the basic usage. Use the `PageHeaderTitle` within the `PageHeaderTop` to render the page title.

```jsx live
<PageHeader>
  <PageHeaderTop>
    <PageHeaderTitle>Product #123</PageHeaderTitle>
  </PageHeaderTop>
</PageHeader>
```

</Section>

<Section hasExplanation>

#### With back-link

The back-link is present if the `onPopNavigation` property is passed.

```jsx live
<PageHeader onPopNavigation={() => alert('onPopNavigation')}>
  <PageHeaderTop>
    <PageHeaderTitle>Product #123</PageHeaderTitle>
  </PageHeaderTop>
</PageHeader>
```

</Section>

<Section hasExplanation>

### With tags

You can also render components within the `PageHeaderTitle`, such as a `Tag` elements using the `PageHeaderTags` and `PageHeaderTag` composites.

```jsx live
<PageHeader>
  <PageHeaderTop>
    <PageHeaderTitle>
      Product #123
      <PageHeaderTags>
        <PageHeaderTag label="Short text" />
        <PageHeaderTag label="Short text" />
      </PageHeaderTags>
    </PageHeaderTitle>
  </PageHeaderTop>
</PageHeader>
```

</Section>

<Section hasExplanation>

### With actions

Use the `PageHeaderActions` composite within the `PageHeaderTop` to add actions that are relevant for the whole page. Actions can be either `PageHeaderButton` or `PageHeaderMenuButton`, along with the `Menu` composites.

```jsx live
function Example() {
  const state = useMenuState()

  return (
    <PageHeader>
      <PageHeaderTop>
        <PageHeaderTitle>Product #123</PageHeaderTitle>
        <PageHeaderActions>
          <PageHeaderButton variant="critical">Delete item</PageHeaderButton>
          <PageHeaderButton variant="secondary">Edit</PageHeaderButton>
          <PageHeaderButton>Create</PageHeaderButton>
          <PageHeaderMenuButton state={state} />
          <Menu state={state} aria-label="actions">
            <MenuItem label="Create" icon={<IconPlus />} />
            <MenuItem label="Edit" icon={<IconPencil />} />
          </Menu>
        </PageHeaderActions>
      </PageHeaderTop>
    </PageHeader>
  )
}
```

</Section>

<Section hasExplanation>

#### With tabs

If you ever need tabs on your `PageHeader`, locate them within the `PageHeaderBottom` component.

See the _Full example section_ for a full example with tabs.

```jsx live
function Example() {
  const tabs = useTabState()

  return (
    <PageHeader>
      <PageHeaderTop>
        <PageHeaderTitle>Product #123</PageHeaderTitle>
      </PageHeaderTop>
      <PageHeaderBottom>
        <TabList state={tabs}>
          <Tab id="1">Label</Tab>
          <Tab id="2">Label</Tab>
          <Tab id="3">Label</Tab>
        </TabList>
      </PageHeaderBottom>
    </PageHeader>
  )
}
```

</Section>

</Section>

<Section hasExplanation>

### Full example

Example featuring [DataView](/guidelines/components/data-view/) and [Table](/guidelines/components/table/)

```jsx noInline live
const items = [
  {
    id: 1,
    productName: 'Banana',
    inStock: 380,
    skus: 0,
    price: 80,
  },
  {
    id: 2,
    productName: 'Lemon',
    inStock: 380,
    skus: 26,
    price: 500,
  },
  {
    id: 3,
    productName: 'Tomato',
    inStock: 380,
    skus: 25,
    price: 100,
  },
]

function WithSearch() {
  const view = useDataViewState()
  const search = useSearchState()
  const tabs = useTabState()
  const state = useMenuState()

  const searchedItems = React.useMemo(() => {
    return items.filter((item) =>
      item.productName.toLowerCase().startsWith(
        // use the search debounced value to
        // filter the collection
        search.debouncedValue.toLocaleLowerCase()
      )
    )
  }, [search])

  const table = useTableState({
    view,
    columns: [
      {
        id: 'productName',
        header: 'Product Name',
      },
      {
        id: 'inStock',
        header: 'In Stock',
      },
      {
        id: 'skus',
        header: 'SKUs',
      },
      {
        id: 'price',
        header: 'Price',
      },
    ],
    items: searchedItems,
    length: 5,
  })

  return (
    <Page>
      <PageHeader onPopNavigation={() => alert('should go back')}>
        <PageHeaderTop>
          <PageHeaderTitle>
            Product #123{' '}
            <PageHeaderTags>
              <PageHeaderTag label="Short text" />
            </PageHeaderTags>
          </PageHeaderTitle>
          <PageHeaderActions>
            <PageHeaderButton>Create</PageHeaderButton>
            <PageHeaderMenuButton state={state} />
            <Menu state={state} aria-label="actions">
              <MenuItem label="Create" icon={<IconPlus />} />
              <MenuItem label="Edit" icon={<IconPencil />} />
            </Menu>
          </PageHeaderActions>
        </PageHeaderTop>
        <PageHeaderBottom>
          <TabList state={tabs}>
            <Tab id="1">Label</Tab>
            <Tab id="2">Label</Tab>
            <Tab id="3">Label</Tab>
          </TabList>
        </PageHeaderBottom>
      </PageHeader>
      <PageContent>
        <DataView state={view}>
          <DataViewControls>
            <Search id="search" placeholder="Search" state={search} />
          </DataViewControls>
          <Table state={table} />
        </DataView>
      </PageContent>
    </Page>
  )
}

render(<WithSearch />)
```

</Section>
